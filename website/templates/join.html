{% extends "base.html" %}
{% load static %}
{% block title %}
    Create Organization
{% endblock title %}
{% block description %}
    Create an organization by filling out the necessary information, including organization name, website, logo, email, and subscription plan.
{% endblock description %}
{% block keywords %}
    Create Organization, Organization Information, Website, Logo, Email, Subscription Plan, Organization Registration
{% endblock keywords %}
{% block og_title %}
    Create Organization - Register Your Organization
{% endblock og_title %}
{% block og_description %}
    Register your organization by providing essential information such as organization name, website, logo, email, and selecting a subscription plan.
{% endblock og_description %}
{% load gravatar %}
{% load i18n %}
{% block style %}
    <style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Roboto+Slab:wght@400;700&display=swap');

  html {
    height: 100%;
    min-height: 800px;
  }

  body {
    background: url('https://i.pinimg.com/originals/48/79/86/487986c17560a8ed1afdc55e480e5be2.png');
    background-size: cover;
    background-repeat: no-repeat;
    text-align: center;
    font-family: 'Noto Sans', sans-serif;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  #payment-form{
    left: 50%;
    transform: translateX(-50%);
  }

  #subscription_id{
    height: 460px;
    max-width: none;
  }

  #card-element-container{
    left: 50%; 
    transform: translateX(-50%);
  }

  h1 {
    font-weight: 400;
    padding-top: 0;
    margin-top: 0;
    font-family: 'Roboto Slab', serif;
  }

  #svg_form_time {
    height: 15px;
    max-width: 80%;
    margin: 40px auto 20px;
    display: block;
  }

  #svg_form_time circle,
  #svg_form_time rect {
    fill: white;
  }

  .button {
    background: rgb(237, 40, 70);
    border-radius: 5px;
    padding: 15px 25px;
    display: inline-block;
    margin: 10px;
    font-weight: bold;
    color: white;
    cursor: pointer;
    box-shadow: 0px 2px 5px rgb(0, 0, 0, 0.5);
  }

  .disabled {
    display: none;
  }

  section {
    padding: 50px;
    max-width: 300px;
    margin: 30px auto;
    background: white;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.3);
    border-radius: 5px;
    transition: transform 0.2s ease-in-out;
  }


  input {
    width: 100%;
    margin: 7px 0px;
    display: inline-block;
    padding: 12px 25px;
    box-sizing: border-box;
    border-radius: 5px;
    border: 1px solid lightgrey;
    font-size: 1em;
    font-family: inherit;
    background: white;
  }

  p {
    text-align: justify;
    margin-top: 0;
  }

  .subrow .col-md-6:nth-child(1) .panel {
    background-color: #F76B78;
  }

  .subrow .col-md-6:nth-child(2) .panel {
    background-color: #DC4353;
  }

  .subrow .col-md-6:nth-child(3) .panel {
    background-color: #C41E2E;
  }

  .subrow .col-md-6:nth-child(4) .panel {
    background-color: #9B0C1A;
  }

  .subrow .col-md-6:nth-child(1) .panel button {
    background-color: #F76B78;
    border-color: #F76B78;
  }

  .subrow .col-md-6:nth-child(2) .panel button {
    background-color: #DC4353;
    border-color: #DC4353;
  }

  .subrow .col-md-6:nth-child(3) .panel button {
    background-color: #C41E2E;
    border-color: #C41E2E;
  }

  .subrow .col-md-6:nth-child(4) .panel button {
    background-color: #9B0C1A;
    border-color: #9B0C1A;
  }

  .image-subs {
    margin-left: 10px;
  }

  .plan-style {
    font-size: 24pt
  }

  .plan-color {
    color: white;
  }

  .newsletter {
    font-size: 18pt;
  }

  .announce {
    font-size: 20pt;
  }

  label {
    width: 100%;
    display: block;
  }

  .card-input-element {
    display: none;
  }

  .card-input {
    margin: 10px;
    padding: 00px;
  }

  .card-input:hover {
    cursor: pointer;
  }

  .card-input-element:checked+.card-input {
    box-shadow: 0 0 1px 1px #dc4853;
  }

  .panel-heading {
    background-color: #DC4353;
  }

  .panel-body {
    border: 1px solid #a7a7b1;
    border-top: none;
  }

  .simplebox,
  .simplebutton {
    outline: none;
    border: 1px solid #ddd !important;
    -webkit-box-shadow: none !important;
    -moz-box-shadow: none !important;
    box-shadow: none !important;
    font-size: 12px;
  }

  .formHolder {
    < !-- width: 300px;
    -->margin: 0 auto;
    < !-- background: rgba(255, 255, 255, 1);
    -->< !-- -webkit-border-radius: 6px;
    -->border-radius: 6px;
    overflow: hidden;
    < !-- padding: 30px;
    -->< !-- box-shadow: 0 4px 2px -2px rgba(0, 0, 0, 0.2);
    -->
  }

  .formHolder h3 {
    margin: 0 0 14px 0;
    font-size: 19px;
    font-weight: 600;
  }

  .wallet {
    display: none;
  }

  .card .cardButton {
    margin-right: 5px;
  }

  .wallet .cardButton {
    margin-left: 5px;
  }

  .wallet {
    display: none;
  }

  .overlay {
    background: #ff1d1d;
    display: none;
    position: absolute;
    top: 0;
    right: 0;
    z-index: 3000;
    bottom: 0;
    left: 0;
    opacity: 0.5;
  }

  .center {
    position: absolute;
    width: 20%;
    height: 20%;
    top: 30%;
    left: 42%;
  }

  .dot-1 {
    position: absolute;
    z-index: 3;
    width: 30px;
    height: 30px;
    top: 95px;
    left: 95px;
    background: #fff;
    border-radius: 50%;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation: jump-jump-1 2s cubic-bezier(0.21, 0.98, 0.6, 0.99) infinite alternate;
    animation: jump-jump-1 2s cubic-bezier(0.21, 0.98, 0.6, 0.99) infinite alternate;
  }

  .dot-2 {
    position: absolute;
    z-index: 2;
    width: 60px;
    height: 60px;
    top: 80px;
    left: 80px;
    background: #fff;
    border-radius: 50%;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation: jump-jump-2 2s cubic-bezier(0.21, 0.98, 0.6, 0.99) infinite alternate;
    animation: jump-jump-2 2s cubic-bezier(0.21, 0.98, 0.6, 0.99) infinite alternate;
  }

  .dot-3 {
    position: absolute;
    z-index: 1;
    width: 90px;
    height: 90px;
    top: 65px;
    left: 65px;
    background: #fff;
    border-radius: 50%;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation: jump-jump-3 2s cubic-bezier(0.21, 0.98, 0.6, 0.99) infinite alternate;
    animation: jump-jump-3 2s cubic-bezier(0.21, 0.98, 0.6, 0.99) infinite alternate;
  }

  @-webkit-keyframes jump-jump-1 {

    0%,
    70% {
      box-shadow: 2px 2px 3px 2px rgba(0, 0, 0, 0.2);
      -webkit-transform: scale(0);
      transform: scale(0);
    }

    100% {
      box-shadow: 10px 10px 15px 0 rgba(0, 0, 0, 0.3);
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }

  @keyframes jump-jump-1 {

    0%,
    70% {
      box-shadow: 2px 2px 3px 2px rgba(0, 0, 0, 0.2);
      -webkit-transform: scale(0);
      transform: scale(0);
    }

    100% {
      box-shadow: 10px 10px 15px 0 rgba(0, 0, 0, 0.3);
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }

  @-webkit-keyframes jump-jump-2 {

    0%,
    40% {
      box-shadow: 2px 2px 3px 2px rgba(0, 0, 0, 0.2);
      -webkit-transform: scale(0);
      transform: scale(0);
    }

    100% {
      box-shadow: 10px 10px 15px 0 rgba(0, 0, 0, 0.3);
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }

  @keyframes jump-jump-2 {

    0%,
    40% {
      box-shadow: 2px 2px 3px 2px rgba(0, 0, 0, 0.2);
      -webkit-transform: scale(0);
      transform: scale(0);
    }

    100% {
      box-shadow: 10px 10px 15px 0 rgba(0, 0, 0, 0.3);
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }

  @-webkit-keyframes jump-jump-3 {

    0%,
    10% {
      box-shadow: 2px 2px 3px 2px rgba(0, 0, 0, 0.2);
      -webkit-transform: scale(0);
      transform: scale(0);
    }

    100% {
      box-shadow: 10px 10px 15px 0 rgba(0, 0, 0, 0.3);
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }

  @keyframes jump-jump-3 {

    0%,
    10% {
      box-shadow: 2px 2px 3px 2px rgba(0, 0, 0, 0.2);
      -webkit-transform: scale(0);
      transform: scale(0);
    }

    100% {
      box-shadow: 10px 10px 15px 0 rgba(0, 0, 0, 0.3);
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }
    </style>
{% endblock style %}
{% block content %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js"
            integrity="sha384-WT0CC+OrC0vGKpxNQInSyfMeKWFIpgiHtnV9HsqN0g6n9urfDfEUQJZFpT0t9P4U"
            crossorigin="anonymous"></script>
    <div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h2 class="mt-6 text-3xl font-bold tracking-tight text-gray-900">Join Organization</h2>
                <p class="mt-2 text-sm text-gray-600">Join an organization and collaborate with their team</p>
            </div>
            <!-- Join Form -->
            <div class="bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10">
                <form class="space-y-6" method="post" action="{% url 'join' %}">
                    {% csrf_token %}
                    {% if messages %}
                        {% for message in messages %}
                            <div class="rounded-md {% if message.tags == 'error' %}bg-red-50{% else %}bg-green-50{% endif %} p-4 mb-4">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        {% if message.tags == 'error' %}
                                            <i class="fas fa-exclamation-circle text-red-400"></i>
                                        {% else %}
                                            <i class="fas fa-check-circle text-green-400"></i>
                                        {% endif %}
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm {% if message.tags == 'error' %}text-red-700{% else %}text-green-700{% endif %}">{{ message }}</p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% endif %}
                    <div>
                        <label for="organization" class="block text-sm font-medium text-gray-700">Organization Name</label>
                        <div class="mt-1">
                            <input type="text"
                                   name="organization"
                                   id="organization"
                                   required
                                   value="{{ organization_name }}"
                                   class="block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-[#e74c3c] focus:outline-none focus:ring-[#e74c3c] sm:text-sm"
                                   placeholder="Enter organization name">
                        </div>
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Your Email</label>
                        <div class="mt-1">
                            <input type="email"
                                   name="email"
                                   id="email"
                                   required
                                   class="block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-[#e74c3c] focus:outline-none focus:ring-[#e74c3c] sm:text-sm"
                                   placeholder="Enter your email">
                        </div>
                    </div>
                    <div>
                        <button type="submit"
                                class="flex w-full justify-center rounded-md border border-transparent bg-[#e74c3c] py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-[#e74c3c] focus:ring-offset-2 transition-colors duration-200">
                            <i class="fas fa-user-plus mr-2"></i>
                            Join Organization
                        </button>
                    </div>
                </form>
            </div>
            <!-- Back Link -->
            <div class="mt-6 text-center">
                <a href="{% url 'organizations' %}"
                   class="text-sm font-medium text-[#e74c3c] hover:text-red-700">
                    <i class="fas fa-arrow-left mr-1"></i>
                    Back to Organizations
                </a>
            </div>
        </div>
    </div>
{% endblock content %}
{% block after_js %}
    <script type="text/javascript">
  // Create a Stripe client.
  var paymentType = 'card';
  var showcard = document.getElementById('showcard');
  showcard.addEventListener('click', function (event) {
    paymentType = 'card'
  })
  var showwallet = document.getElementById('showwallet');
  showwallet.addEventListener('click', function (event) {
    paymentType = 'wallet'
  })

  // Custom styling can be passed to options when creating an Element.
  // (Note that this demo uses a wider set of styles than the guide below.)
  var style = {
    base: {
      color: '#32325d',
      fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
      fontSmoothing: 'antialiased',
      fontSize: '16px',
      '::placeholder': {
        color: '#aab7c4'
      }
    },
    invalid: {
      color: '#fa755a',
      iconColor: '#fa755a'
    }
  };

  // Create an instance of the card Element.
  var card = elements.create('card', {
    style: style
  });

  // Add an instance of the card Element into the `card-element` <div>.
  card.mount('#card-element');
  // Handle real-time validation errors from the card Element.
  card.on('change', function (event) {
    var displayError = document.getElementById('card-errors');
    if (event.error) {
      displayError.textContent = event.error.message;
    } else {
      displayError.textContent = '';
    }
  });
    </script>
    <script type="text/javascript">
  $('document').ready(function () {
    $('#cardButton, #walletButton').click(function () {

      setTimeout(function () {

        $(".page-transition").velocity("fadeIn", {
          queue: false
        });

      }, 100);

      $('.page-transition').velocity({
        scale: "10000%",
        translateZ: 0
      }, {
        duration: 500,
        complete: function () {

        }

      })

    })

    $('#showcard').click(function () {
      $(".wallet").velocity({
        scale: "65%",
        translateZ: 0
      }, {
        duration: 400,
        easing: "easeInOutBack",
        complete: function () {

          $(".card").velocity({
            scale: "100%",
            translateZ: 0
          }, {
            duration: 400,
            easing: "easeInOutBack"
          });

          setTimeout(function () {

            $(".card").velocity("fadeIn", {
              queue: false,
              duration: 150
            });

          }, 150);


        }
      });

      setTimeout(function () {

        $(".wallet").velocity("fadeOut", {
          queue: false,
          duration: 150
        });

      }, 150);

    });

    $('#showwallet').click(function () {
      $(".wallet").velocity({
        scale: "65%",
        translateZ: 0
      });

      $(".card").velocity({
        scale: "65%",
        translateZ: 0
      }, {
        duration: 400,
        easing: "easeInOutBack",
        complete: function () {

          $(".wallet").velocity({
            scale: "100%",
            translateZ: 0
          }, {
            duration: 400,
            easing: "easeInOutBack"
          });

          setTimeout(function () {

            $(".wallet").velocity("fadeIn", {
              queue: false,
              duration: 150
            });

          }, 150);


        }
      });

      setTimeout(function () {

        $(".card").velocity("fadeOut", {
          queue: false,
          duration: 150
        });

      }, 150);

    });

  });
    </script>
    <script type="text/javascript">
  $(document).ready(function () {
    var base_color = "rgb(230,230,230)";
    var active_color = "rgb(237, 40, 70)";



    var child = 1;
    var length = $("section").length - 1;
    $("#prev").addClass("disabled");
    $("#submit").addClass("disabled");

    $("section").not("section:nth-of-type(1)").hide();
    $("section").not("section:nth-of-type(1)").css('transform', 'translateX(100px)');

    var svgWidth = length * 200 + 24;
    $("#svg_wrap").html(
      '<svg version="1.1" id="svg_form_time" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 ' + svgWidth + ' 24" xml:space="preserve"></svg>'
    );

    function makeSVG(tag, attrs) {
      var el = document.createElementNS("http://www.w3.org/2000/svg", tag);
      for (var k in attrs) el.setAttribute(k, attrs[k]);
      return el;
    }

    for (i = 0; i < length; i++) {
      var positionX = 12 + i * 200;
      var rect = makeSVG("rect", {
        x: positionX,
        y: 9,
        width: 200,
        height: 6
      });
      document.getElementById("svg_form_time").appendChild(rect);
      // <g><rect x="12" y="9" width="200" height="6"></rect></g>'
      var circle = makeSVG("circle", {
        cx: positionX,
        cy: 12,
        r: 12,
        width: positionX,
        height: 6
      });
      document.getElementById("svg_form_time").appendChild(circle);
    }

    var circle = makeSVG("circle", {
      cx: positionX + 200,
      cy: 12,
      r: 12,
      width: positionX,
      height: 6
    });
    document.getElementById("svg_form_time").appendChild(circle);

    $('#svg_form_time rect').css('fill', base_color);
    $('#svg_form_time circle').css('fill', base_color);
    $("circle:nth-of-type(1)").css("fill", active_color);


    $(".button").click(function () {
      $("#svg_form_time rect").css("fill", active_color);
      $("#svg_form_time circle").css("fill", active_color);
      var id = $(this).attr("id");
      if (id == "next") {
        $("#prev").removeClass("disabled");
        if (child >= length) {
          $(this).addClass("disabled");
          $('#submit').removeClass("disabled");
        }
        if (child <= length) {
          child++;
        }
      } else if (id == "prev") {
        $("#next").removeClass("disabled");
        $('#submit').addClass("disabled");
        if (child <= 2) {
          $(this).addClass("disabled");
        }
        if (child > 1) {
          child--;
        }
      }
      var circle_child = child + 1;
      $("#svg_form_time rect:nth-of-type(n + " + child + ")").css(
        "fill",
        base_color
      );
      $("#svg_form_time circle:nth-of-type(n + " + circle_child + ")").css(
        "fill",
        base_color
      );
      var currentSection = $("section:nth-of-type(" + child + ")");
      currentSection.fadeIn();
      currentSection.css('transform', 'translateX(0)');
      currentSection.prevAll('section').css('transform', 'translateX(-100px)');
      currentSection.nextAll('section').css('transform', 'translateX(100px)');
      $('section').not(currentSection).hide();
    });

  });
    </script>
{% endblock after_js %}
