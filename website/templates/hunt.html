{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load custom_tags %}
{% block style %}
    <style>
        /* Hide white footer space on hunt page */
        body > div.pb-\[50px\] {
            display: none !important;
        }
        /* Remove extra padding from main tag */
        main {
            padding-bottom: 0 !important;
            margin-top: 0 !important;
            min-height: auto !important;
        }
        /* Remove header spacing div */
        body > div.w-full.h-\[50px\] {
            display: none !important;
        }
        /* Ensure form container fits viewport accounting for fixed header */
        .hunt-wrapper {
            padding: 0 !important;
            margin: 0 !important;
            margin-top: 60px !important;
            height: calc(100vh - 60px) !important;
            box-sizing: border-box;
            overflow-y: auto;
        }
        /* Prevent body from scrolling beyond viewport */
        body {
            overflow-x: hidden;
            overflow-y: hidden;
        }
    </style>
{% endblock style %}
{% block content %}
    {% include "includes/sidenav.html" %}
    <script src="{% static "js/jquery.validate.js" %}"></script>
    <!-- Add jQuery UI CSS and JS -->
    <link rel="stylesheet"
          href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <div class="flex items-center justify-center w-full p-2 md:p-4 bg-gray-100 hunt-wrapper">
        <form role="form"
              action="{% url 'hunt' %}"
              method="post"
              enctype="multipart/form-data"
              class="w-full max-w-4xl mx-4 md:mx-0 my-2">
            {% csrf_token %}
            <div class="bg-white p-3 md:p-4 border shadow-md border-gray-200 rounded-lg">
                <div class="flex flex-col justify-center items-center">
                    <div class="flex justify-center border-b-2 w-fit border-red-300 pb-1.5 gap-2 items-center text-xl font-bold text-black/90 md:text-2xl">
                        <p class="whitespace-nowrap">{% trans "Start a" %}</p>
                        <p class="text-red-500">{% trans "Bug Bounty" %}</p>
                    </div>
                    <p class="font-medium text-black/60 mt-1.5 text-xs md:text-sm">{% trans "Enter URL, APP name or GPS location of issue." %}</p>
                </div>
                <div class="border-t border-gray-300 my-2.5"></div>
                {% csrf_token %}
                <div class="space-y-2">
                    <div class="flex items-center border rounded-lg overflow-hidden">
                        <i class="fa fa-bug bg-red-500 text-white p-2.5 text-xs"></i>
                        <input class="w-full py-1.5 px-2.5 outline-none placeholder:text-xs text-xs"
                           type="text"
                           placeholder="Name of the bug bounty"
                           name="name"
                           value="{{ form.url.value|default:'' }}">
                </div>
                    {% if form.errors %}<p class="text-red-500 text-xs mt-0.5">{{ form.url.errors }}</p>{% endif %}
                    <div class="flex items-center border rounded-lg overflow-hidden">
                        <i class="fa fa-link bg-red-500 text-white p-2.5 text-xs"></i>
                        <input class="w-full py-1.5 px-2.5 outline-none placeholder:text-xs text-xs"
                           type="text"
                           placeholder="http://example.com"
                           name="url"
                           value="{{ form.url.value|default:'' }}">
                </div>
                    {% if form.errors %}<p class="text-red-500 text-xs mt-0.5">{{ form.name.errors }}</p>{% endif %}
                    <div class="relative flex flex-col border-2 border-dashed border-gray-300 rounded-lg p-2 hover:border-red-500 transition-colors duration-300 group">
                        <div class="flex items-center justify-center mb-1">
                            <i class="fa fa-cloud-upload text-lg text-red-500 group-hover:scale-110 transition-transform duration-300"></i>
                        </div>
                        <p class="text-center text-gray-600 mb-1 text-xs">Drag and drop files or</p>
                        <label for="logo-upload"
                               class="flex items-center justify-center cursor-pointer bg-red-500 text-white py-1 px-2.5 rounded-md hover:bg-red-600 transition-colors duration-200 mx-auto text-xs">
                            <i class="fa fa-file-o mr-1.5 text-xs"></i>
                            Browse
                        </label>
                        <input id="logo-upload" class="hidden" type="file" name="logo">
                        <p class="text-center text-xs text-gray-500 mt-1">All formats supported</p>
                    </div>
                    {% if form.logo.errors %}<p class="text-red-500 text-xs mt-0.5">{{ form.logo.errors }}</p>{% endif %}
                    <div class="flex items-start border rounded-lg overflow-hidden">
                        <i class="fa fa-pencil-square-o bg-red-500 text-white p-2.5 text-xs"></i>
                        <textarea name="description"
                                  id="description"
                                  rows="2"
                                  class="w-full py-1.5 px-2.5 outline-none placeholder:text-xs text-xs h-[60px]"
                                  placeholder="Describe bug issue">{{ form.description.value|default:'' }}</textarea>
                    </div>
                    {% if form.description.errors %}<p class="text-red-500 text-xs mt-0.5">{{ form.descriptioon.errors }}</p>{% endif %}
                    <div>
                        <div class="flex items-center border rounded-lg overflow-hidden">
                            <i class="fa fa-tag bg-red-500 text-white p-2.5 text-xs"></i>
                            <select name="plan"
                                    id="bughunt-select-plan"
                                    class="w-full py-1.5 px-2.5 bg-white outline-none cursor-pointer text-xs appearance-none">
                            <option value="Flea">{% trans "Flea Plan" %} $9.00 / {% trans "Month" %}</option>
                            <option value="Ant">{% trans "Ant Plan" %} $99.00 / {% trans "Month" %}</option>
                            <option value="Wasp">{% trans "Wasp Plan" %} $499.00 / {% trans "Month" %}</option>
                            <option value="Scorpion">{% trans "Scorpion Plan" %} $1499.00 / {% trans "Month" %}</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <h1 class="text-sm font-semibold text-black/85 mt-1.5">{% trans "Grand Prize" %}</h1>
                        <p class="text-xs text-gray-500">{% trans "Max amount awarded to winner" %}</p>
                        <div class="relative py-2 px-2 my-2">
                            <input class="w-full appearance-none h-1.5 rounded-full bg-gray-200 focus:outline-none"
                                   type="range"
                                   name="prize"
                                   value="{{ form.prize.value|default:'100' }}"
                                   min="100"
                                   max="10000"
                                   step="100"
                                   oninput="document.getElementById('prize-value').textContent = '$' + this.value">
                            <div class="absolute -top-1 left-0 right-0 text-center">
                                <span class="bg-red-500 text-white px-1.5 py-0.5 rounded text-xs font-medium"
                                      id="prize-value">${{ form.prize.value|default:'100' }}</span>
                            </div>
                            <div class="flex justify-between mt-1 text-xs text-gray-500">
                                <span>$100</span>
                                <span>$5,000</span>
                                <span>$10,000</span>
                            </div>
                        </div>
                        {% if form.prize.errors %}<p class="text-red-500 text-xs mt-0.5">{{ form.prize.errors }}</p>{% endif %}
                    </div>
                    <div class="flex justify-end mt-1">
                        <button type="submit"
                                class="bg-red-500 text-white font-semibold text-sm py-1.5 px-5 rounded-md hover:bg-red-600">
                            {% trans "Start Bug Bounty" %}!
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
{% endblock content %}
