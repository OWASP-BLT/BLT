{% extends "base.html" %}

{% block content %}
    {% include "includes/sidenav.html" %}

    <style>
        .recommend-user {
            background-color: #fff;
            padding: 40px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .red-btn {
            background-color: #cc0000;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .red-btn:hover {
            background-color: #990000;
        }
        .error {
            color: #cc0000;
            font-weight: bold;
            margin-bottom: 15px;
        }
    </style>

    <h1>Recommend a User</h1>
    
    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    <form method="POST" class="recommend-user">
        {% csrf_token %}
        
        <!-- Search Box -->
        <label for="search_user">Search for a user:</label>
        <input type="text" id="search_user" onkeyup="filterUsers()" placeholder="Start typing a name...">
        
        <!-- List of Users -->
        <div id="user_list">
            {% for user in users %}
                <div>
                    <input type="radio" name="recommended_user" value="{{ user.id }}" id="user_{{ user.id }}">
                    <label for="user_{{ user.id }}">{{ user.username }}</label>
                </div>
            {% endfor %}
        </div>

        <button class="red-btn" type="submit">Recommend</button>
    </form>

    <script>
        function filterUsers() {
            const input = document.getElementById('search_user').value.toLowerCase();
            const users = document.querySelectorAll('#user_list div');

            users.forEach(userDiv => {
                const label = userDiv.querySelector('label').textContent.toLowerCase();
                if (label.includes(input)) {
                    userDiv.style.display = '';
                } else {
                    userDiv.style.display = 'none';
                }
            });
        }
    </script>
{% endblock %}
