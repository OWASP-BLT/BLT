{% extends "base.html" %}
{% load static %}
{% load gravatar %}
{% load custom_tags %}
{% block title %}
    Overview | BACON
{% endblock title %}
{% block description %}
    Learn about the BACON project, its key features, and how to get involved in BACON
{% endblock description %}
{% block keywords %}
    overview, BACON, blockchain, contribution, open-source, Bitcoin, Runes, features, updates
{% endblock keywords %}
{% block og_title %}
    BACON Project Overview - BACON
{% endblock og_title %}
{% block og_description %}
    Explore the BACON project, its key features, and how you can contribute to the development and success of the open-source ecosystem through BACON
{% endblock og_description %}
{% block content %}
    <div class="container mx-auto px-4 py-8">
        <!-- Include the left navigation -->
        <div class="flex">
            {% include "includes/sidenav.html" %}
            <!-- Main Content Section -->
            <div class="main-content w-full md:pl-6 lg:pl-8">
                <!-- Overview Section -->
                <section id="overview" class="mb-12">
                    <h2 class="text-3xl font-bold mb-4 text-center md:text-left">Overview</h2>
                    <!-- Centered Image Container -->
                    <div class="flex justify-center mb-6">
                        <img src="{% static 'images/bacon.png' %}"
                             alt="BACON Project Image"
                             class="rounded-lg shadow-lg max-w-full md:w-1/3 lg:w-1/4 mb-6"
                             height="auto"
                             width="50%">
                    </div>
                    <p class="text-gray-700 text-lg leading-relaxed">
                        BACON (Blockchain Assisted Contribution Network) is an innovative project within the OWASP BLT platform that integrates Bitcoin Core technology and the Runes protocol to reward contributors with blockchain-based incentives. By leveraging the power of blockchain, BACON ensures transparency, security, and fairness in the distribution of rewards, ultimately enhancing the quality and security of open-source software.
                    </p>
                </section>
                <!-- Features Section -->
                <section id="features" class="mb-12 bg-gray-50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-center md:text-left">Key Features</h2>
                    <ul class="list-disc list-inside space-y-3 pl-4">
                        <li>
                            <strong>Incentivized Contributions:</strong> Earn BACON tokens for reporting issues and resolving bugs.
                        </li>
                        <li>
                            <strong>Blockchain Transparency:</strong> All transactions are securely logged on the Bitcoin blockchain.
                        </li>
                        <li>
                            <strong>Seamless Integration:</strong> BACON tokens are fully integrated within the BLT ecosystem and can be managed via the BLT platform.
                        </li>
                        <li>
                            <strong>Secure Transactions:</strong> Leverage the Runes protocol to ensure all token transactions are safe and immutable.
                        </li>
                    </ul>
                </section>
                <!-- Get Involved Section -->
                <section id="get-involved" class="mb-12">
                    <h2 class="text-3xl font-bold mb-4 text-center md:text-left">Get Involved</h2>
                    <p class="text-gray-700 text-lg leading-relaxed mb-6">
                        We're excited to have the community involved in bringing BACON to life. Whether you’re a developer, blockchain expert, or just passionate about open-source, there’s a place for you in this project.
                    </p>
                    <div class="flex gap-4">
                        <a href="{% url 'contribution_guidelines' %}"
                           class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-md shadow-md">
                            Learn How to Contribute
                        </a>
                        <a href="https://github.com/owasp/BLT-BACON"
                           class="bg-gray-700 text-white font-semibold py-2 px-4 rounded-md shadow-md">
                            View on GitHub
                        </a>
                        <button id="openModalBtn"
                                class="bg-green-600 text-white font-semibold py-2 px-4 rounded-md shadow-md">
                            Submit BACON Request
                        </button>
                    </div>
                </section>
                <!-- Updates Section -->
                <section id="updates" class="mb-12 bg-gray-50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-center md:text-left">Latest Updates</h2>
                    <p class="text-gray-700 text-lg leading-relaxed mb-6">
                        Stay tuned for updates as we progress through the development of the BACON project. You can follow our journey and contribute to the discussion on our community channels.
                    </p>
                    <a href="https://owasp.org/www-project-bug-logging-tool/"
                       class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-md shadow-md">
                        Visit OWASP BLT Wiki
                    </a>
                </section>
                <div id="baconModal"
                     class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden flex items-center justify-center">
                    <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-lg">
                        <h3 class="text-2xl font-semibold mb-4">Submit a BACON Request</h3>
                        <form id="baconForm">
                            <div class="mb-4">
                                <label for="github_url" class="block text-gray-700">GitHub URL</label>
                                <input type="url"
                                       id="github_url"
                                       name="github_url"
                                       class="w-full p-2 border rounded-md"
                                       required>
                            </div>
                            <div class="mb-4">
                                <label for="contribution_type" class="block text-gray-700">Contribution Type</label>
                                <select id="contribution_type"
                                        name="contribution_type"
                                        class="w-full p-2 border rounded-md"
                                        required>
                                    <option value="security">Security Related</option>
                                    <option value="non-security">Non-Security Related</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label for="description" class="block text-gray-700">Description</label>
                                <textarea id="description"
                                          name="description"
                                          class="w-full p-2 border rounded-md"
                                          rows="4"
                                          required></textarea>
                            </div>
                            <div class="mb-4">
                                <label for="bacon_amount" class="block text-gray-700">Bacon amount</label>
                                <input type="text"
                                       id="bacon_amount"
                                       name="bacon_amount"
                                       class="w-full p-2 border rounded-md"
                                       rows="4"
                                       required>
                                </>
                            </div>
                            <div class="flex justify-end">
                                <button type="button"
                                        id="closeModalBtn"
                                        class="bg-gray-500 text-white px-4 py-2 rounded-md mr-2">Cancel</button>
                                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.getElementById("openModalBtn").addEventListener("click", function() {
            document.getElementById("baconModal").classList.remove("hidden");
        });
        
        document.getElementById("closeModalBtn").addEventListener("click", function() {
            document.getElementById("baconModal").classList.add("hidden");
        });
        
        document.getElementById("baconForm").addEventListener("submit", function(event) {
            event.preventDefault();
        
            const formData = {
                github_url: document.getElementById("github_url").value,
                contribution_type: document.getElementById("contribution_type").value,
                description: document.getElementById("description").value,
                bacon_amount: document.getElementById("bacon_amount").value
            };

            fetch("/api/bacon/submit/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRFToken": "{{ csrf_token }}"
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    alert("Submission Successful!");
                    document.getElementById("baconModal").classList.add("hidden");
                    document.getElementById("baconForm").reset();
                } else {
                    alert("Error: " + data.error);
                }
            })
            .catch(error => {
                console.error("Error:", error);
                alert("An unexpected error occurred.");
            });
        });
    </script>
{% endblock content %}
