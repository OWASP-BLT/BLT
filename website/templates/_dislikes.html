{% load gravatar %}

{% if request.user.is_authenticated %}
    <a class="btn btn-info btn-xs dislike_undislike" name="{{ object.pk }}">
        <i class="fa fa-thumbs-down"></i> {{ dislikes }}
    </a>
{% else %}
    <button class="btn btn-info btn-xs" disabled>
        <i class="fa fa-thumbs-down"></i> {{ dislikes }}
    </button>
{% endif %}

{% if dislikers %}
    <a href="#dislikedBy" class="btn btn-xs btn-default disliked-by" data-toggle="modal">Disliked By</a>
{% endif %}

{% if dislikers %}
<div id="dislikedBy" class="modal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <h3>Disliked by:</h3>
                {% for usr in dislikers %}
                    <div class="list-group-item">
                        {% if usr.user.socialaccount_set.all.0.get_avatar_url %}
                            <img src="{{ usr.user.socialaccount_set.all.0.get_avatar_url }}" height="50px">
                        {% else %}
                            <img src="{% gravatar_url usr.user.email 50 %}">
                        {% endif %}
                        <a href="/profile/{{ usr.user.username }}">{{ usr.user.username }}</a>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endif %}