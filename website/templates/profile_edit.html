{% extends "base.html" %}
{% block content %}
    {% include "includes/sidenav.html" %}
    <div class="container mx-auto mt-10">
        <h2 class="text-3xl font-semibold text-center mb-8">Edit Profile</h2>
        <form method="post"
              enctype="multipart/form-data"
              class="bg-white p-6 rounded-lg shadow-lg">
            {% csrf_token %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Left Column -->
                <div>
                    <!-- User Avatar -->
                    <div class="mb-4">
                        <label for="id_user_avatar" class="block text-sm font-medium text-gray-700">Profile Picture</label>
                        <div class="mt-2">
                            {% if form.user_avatar.value %}
                                <img src="{{ form.user_avatar.value.url }}"
                                     alt="Profile Picture"
                                     class="mb-3 w-24 h-24 rounded-full shadow-md"
                                     width="100"
                                     height="100">
                            {% endif %}
                            <input type="file"
                                   name="user_avatar"
                                   id="id_user_avatar"
                                   class="mt-2 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                    </div>
                    <!-- Description -->
                    <div class="mb-4">
                        <label for="id_role" class="block text-sm font-medium text-gray-700">Role</label>
                        <textarea name="role"
                                  id="id_role"
                                  rows="1"
                                  class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                  maxlength="255">{{ form.role.value }}</textarea>
                        <label for="id_description" class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea name="description"
                                  id="id_description"
                                  rows="4"
                                  class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">{{ form.description.value }}</textarea>
                    </div>
                    <!-- Discounted Hourly Rate -->
                    <div class="mb-4">
                        <label for="id_discounted_hourly_rate"
                               class="block text-sm font-medium text-gray-700">Discounted Hourly Rate $/hr</label>
                        <input type="number"
                               name="discounted_hourly_rate"
                               id="id_discounted_hourly_rate"
                               value="{{ form.discounted_hourly_rate.value }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- LinkedIn URL -->
                    <div class="mb-4">
                        <label for="id_linkedin_url" class="block text-sm font-medium text-gray-700">LinkedIn URL</label>
                        <input type="url"
                               name="linkedin_url"
                               id="id_linkedin_url"
                               value="{{ form.linkedin_url.value|default_if_none:"" }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- GitHub URL -->
                    <div class="mb-4">
                        <label for="id_github_url" class="block text-sm font-medium text-gray-700">GitHub URL</label>
                        <input type="url"
                               name="github_url"
                               id="id_github_url"
                               value="{{ form.github_url.value|default_if_none:"" }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- X username -->
                    <div class="mb-4">
                        <label for="id_x_username" class="block text-sm font-medium text-gray-700">X URL</label>
                        <input type="text"
                               name="x_username"
                               id="id_x_username"
                               value="{{ form.x_username.value|default_if_none:"" }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- Website URL -->
                    <div class="mb-4">
                        <label for="id_website_url" class="block text-sm font-medium text-gray-700">Website URL</label>
                        <input type="url"
                               name="website_url"
                               id="id_website_url"
                               value="{{ form.website_url.value|default_if_none:"" }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- Issues Hidden -->
                    <div class="mb-4">
                        <label for="id_issues_hidden"
                               class="block text-sm font-medium text-gray-700">Hide Issues</label>
                        <input type="checkbox"
                               name="issues_hidden"
                               id="id_issues_hidden"
                               class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                               {% if form.issues_hidden.value %}checked{% endif %}>
                    </div>
                </div>
                <!-- Right Column -->
                <div>
                    <!-- BTC Address -->
                    <div class="mb-4">
                        <label for="id_btc_address" class="block text-sm font-medium text-gray-700">Bitcoin Address</label>
                        <input type="text"
                               name="btc_address"
                               id="id_btc_address"
                               value="{{ form.btc_address.value|default_if_none:"" }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- BCH Address -->
                    <div class="mb-4">
                        <label for="id_bch_address" class="block text-sm font-medium text-gray-700">Bitcoin Cash Address</label>
                        <input type="text"
                               name="bch_address"
                               id="id_bch_address"
                               value="{{ form.bch_address.value|default_if_none:"" }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- ETH Address -->
                    <div class="mb-4">
                        <label for="id_eth_address" class="block text-sm font-medium text-gray-700">Ethereum Address</label>
                        <input type="text"
                               name="eth_address"
                               id="id_eth_address"
                               value="{{ form.eth_address.value|default_if_none:"" }}"
                               class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <!-- Tags -->
                    <div class="mb-4">
                        <label for="id_tags" class="block text-sm font-medium text-gray-700">Tags</label>
                        <div class="mt-2 grid grid-cols-2 gap-4">
                            {% for tag in form.tags.field.queryset %}
                                <div class="flex items-center">
                                    <input type="checkbox"
                                           name="tags"
                                           value="{{ tag.id }}"
                                           id="tag_{{ tag.id }}"
                                           class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                                           {% if tag.id in form.tags.value %}checked{% endif %}>
                                    <label for="tag_{{ tag.id }}" class="ml-2 text-sm text-gray-700">{{ tag.name }}</label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <!-- Subscribed Domains -->
                    <div class="mb-4">
                        <label for="id_subscribed_domains"
                               class="block text-sm font-medium text-gray-700">Subscribed Domains</label>
                        <div class="mt-2 grid grid-cols-2 gap-4">
                            {% for domain in form.subscribed_domains.field.queryset %}
                                {% if domain.id in form.subscribed_domains.value %}
                                    <div class="flex items-center">
                                        <input type="checkbox"
                                               name="subscribed_domains"
                                               value="{{ domain.id }}"
                                               id="domain_{{ domain.id }}"
                                               class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                                               checked>
                                        <label for="domain_{{ domain.id }}" class="ml-2 text-sm text-gray-700">{{ domain.name }}</label>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <!-- Subscribed Users -->
                    <div class="mb-4">
                        <label for="id_subscribed_users"
                               class="block text-sm font-medium text-gray-700">Subscribed Users</label>
                        <div class="mt-2 grid grid-cols-2 gap-4">
                            {% for user in form.subscribed_users.field.queryset %}
                                {% if user.id in form.subscribed_users.value %}
                                    <div class="flex items-center">
                                        <input type="checkbox"
                                               name="subscribed_users"
                                               value="{{ user.id }}"
                                               id="user_{{ user.id }}"
                                               class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                                               checked>
                                        <label for="user_{{ user.id }}" class="ml-2 text-sm text-gray-700">{{ user.username }}</label>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center mt-8">
                <button type="submit"
                        class="px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-500">
                    Save Changes
                </button>
            </div>
        </form>
    </div>
{% endblock content %}
