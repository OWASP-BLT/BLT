{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title %}Verify Domain Claim - {{ domain.name }}{% endblock %}
{% block description %}
    Verify your ownership of {{ domain.name }} by entering the verification code sent to the domain's email.
{% endblock %}
{% block content %}
    {% include "includes/sidenav.html" %}
    <div class="flex items-center justify-center min-h-[60vh] mt-[4vh] max-sm:mt-[5vh] font-ubuntu">
        <div class="w-full max-w-md p-8 border rounded-lg bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600">
            <div class="flex flex-col items-center gap-4 mb-6">
                <div class="w-16 h-16 flex items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30">
                    <i class="fas fa-shield-alt text-[#e74c3c] text-2xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-center">{% trans "Verify Domain Ownership" %}</h1>
                <p class="text-sm text-gray-600 dark:text-gray-400 text-center">
                    {% trans "A verification code has been sent to the email address associated with" %}
                    <span class="font-semibold">{{ domain.name }}</span>.
                    {% trans "Enter the code below to become a manager." %}
                </p>
            </div>
            {% if messages %}
                <div class="mb-4">
                    {% for message in messages %}
                        <div class="p-3 rounded-lg text-sm {% if message.tags == 'error' %}bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400{% elif message.tags == 'success' %}bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400{% else %}bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400{% endif %}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            <form method="post" action="{% url 'domain_claim_verify' pk=domain.pk %}">
                {% csrf_token %}
                <div class="mb-6">
                    <label for="verification_code"
                           class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        {% trans "Verification Code" %}
                    </label>
                    <input type="text"
                           id="verification_code"
                           name="verification_code"
                           maxlength="6"
                           pattern="[0-9]{6}"
                           placeholder="000000"
                           required
                           class="w-full px-4 py-3 text-center text-2xl tracking-[0.5em] border rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#e74c3c] focus:border-transparent outline-none"
                           autocomplete="off">
                    <p class="mt-2 text-xs text-gray-500 dark:text-gray-400">{% trans "The code expires in 30 minutes." %}</p>
                </div>
                <button type="submit"
                        class="w-full px-6 py-3 bg-[#e74c3c] text-white font-semibold rounded-lg hover:bg-red-600 transition duration-200">
                    {% trans "Verify & Claim Domain" %}
                </button>
            </form>
            <div class="mt-6 text-center">
                <form method="post"
                      action="{% url 'domain_claim_request' pk=domain.pk %}"
                      class="inline">
                    {% csrf_token %}
                    <button type="submit"
                            class="text-sm text-[#e74c3c] hover:text-red-600 transition duration-200">
                        {% trans "Resend verification code" %}
                    </button>
                </form>
                <span class="text-gray-400 mx-2">|</span>
                <a href="{% url 'domain' slug=domain.name %}"
                   class="text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition duration-200">
                    {% trans "Back to domain" %}
                </a>
            </div>
        </div>
    </div>
{% endblock content %}
