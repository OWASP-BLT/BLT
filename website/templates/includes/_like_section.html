{% load gravatar %}
{% load custom_tags %}
<div id="like-section-{{ object.id }}" class="flex items-center gap-4">
    <!-- Like -->
    <button hx-post="{% url 'like_issue' object.id %}"
            hx-target="#like-section-{{ object.id }}"
            hx-swap="outerHTML"
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
            class="flex items-center gap-2 px-4 py-2 rounded-lg border {% if user_vote == 'upvote' %}border-red-500 bg-red-50 dark:bg-red-900/20{% else %}border-gray-300 dark:border-gray-600{% endif %} hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
            title="Like this issue">
        <span class="htmx-indicator" id="like-loading-{{ object.id }}">â³</span>
        ğŸ‘ <span class="font-semibold">{{ positive_votes }}</span>
    </button>
    <!-- Dislike -->
    <button hx-post="{% url 'dislike_issue' object.id %}"
            hx-target="#like-section-{{ object.id }}"
            hx-swap="outerHTML"
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
            class="flex items-center gap-2 px-4 py-2 rounded-lg border {% if user_vote == 'downvote' %}border-purple-500 bg-purple-50 dark:bg-purple-900/20{% else %}border-gray-300 dark:border-gray-600{% endif %} hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
            title="Dislike this issue">
        <span class="htmx-indicator" id="dislike-loading-{{ object.id }}">â³</span>
        ğŸ‘ <span class="font-semibold">{{ negative_votes }}</span>
    </button>
    <!-- Flag -->
    <button hx-post="{% url 'flag_issue' object.id %}"
            hx-target="#like-section-{{ object.id }}"
            hx-swap="outerHTML"
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
            class="flex items-center gap-2 px-4 py-2 rounded-lg border {% if user_has_flagged %}border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20{% else %}border-gray-300 dark:border-gray-600{% endif %} hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
            title="Flag this issue">
        <span class="htmx-indicator" id="flag-loading-{{ object.id }}">â³</span>
        ğŸš© <span class="font-semibold">{{ flags_count }}</span>
    </button>
</div>
