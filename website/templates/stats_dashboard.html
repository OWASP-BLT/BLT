{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title %}
    Statistics Dashboard
{% endblock title %}
{% block content %}
    {% include "includes/sidenav.html" %}
    <div id="mainContent"
         class="p-4 sm:p-6 lg:p-8 mt-[160px] transition-all duration-300">
        <div class="flex flex-col space-y-4 mb-8">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl font-bold text-gray-900">Statistics Dashboard</h1>
            </div>
            <!-- Time Period Selector -->
            <div class="flex flex-wrap gap-2 items-center bg-white p-4 rounded-lg shadow-sm">
                <span class="text-gray-700 font-medium">Time Period:</span>
                {% for option in period_options %}
                    <a href="?period={{ option.value }}"
                       class="px-4 py-2 rounded-md text-sm font-medium {% if period == option.value %}bg-[#e74c3c] text-white{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} transition-colors duration-200">
                        {{ option.label }}
                    </a>
                {% endfor %}
            </div>
        </div>
        <!-- Stats Grid -->
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-4">
            <!-- Users Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Users</h3>
                    <i class="fa fa-users text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.users.total }}</div>
                <div class="text-sm text-gray-600">
                    Active: {{ stats.users.active }}
                    <span class="text-xs text-gray-500">(Total: {{ stats.users.total_all_time }})</span>
                </div>
            </div>
            <!-- Issues Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Issues</h3>
                    <i class="fa fa-bug text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.issues.total }}</div>
                <div class="text-sm text-gray-600">
                    Open: {{ stats.issues.open }}
                    <span class="text-xs text-gray-500">(Total: {{ stats.issues.total_all_time }})</span>
                </div>
            </div>
            <!-- Domains Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Domains</h3>
                    <i class="fa fa-globe text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.domains.total }}</div>
                <div class="text-sm text-gray-600">
                    Active: {{ stats.domains.active }}
                    <span class="text-xs text-gray-500">(Total: {{ stats.domains.total_all_time }})</span>
                </div>
            </div>
            <!-- Organizations Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Orgs</h3>
                    <i class="fa fa-building text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.organizations.total }}</div>
                <div class="text-sm text-gray-600">
                    Active: {{ stats.organizations.active }}
                    <span class="text-xs text-gray-500">(Total: {{ stats.organizations.total_all_time }})</span>
                </div>
            </div>
            <!-- Bug Hunts Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Hunts</h3>
                    <i class="fa fa-search text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.hunts.total }}</div>
                <div class="text-sm text-gray-600">
                    Active: {{ stats.hunts.active }}
                    <span class="text-xs text-gray-500">(Total: {{ stats.hunts.total_all_time }})</span>
                </div>
            </div>
            <!-- Points Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Points</h3>
                    <i class="fa fa-trophy text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.points.total }}</div>
                <div class="text-sm text-gray-600">
                    <span class="text-xs text-gray-500">(Total: {{ stats.points.total_all_time }})</span>
                </div>
            </div>
            <!-- Projects Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Projects</h3>
                    <i class="fa fa-folder text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.projects.total }}</div>
                <div class="text-sm text-gray-600">
                    <span class="text-xs text-gray-500">(Total: {{ stats.projects.total_all_time }})</span>
                    <form method="post" action="{% url 'sync_github_projects' %}" class="mt-1">
                        {% csrf_token %}
                        <button type="submit"
                                class="text-xs bg-[#e74c3c] hover:bg-[#d44637] text-white px-2 py-1 rounded-md w-full">
                            <i class="fas fa-sync-alt mr-1"></i>Sync
                        </button>
                    </form>
                </div>
            </div>
            <!-- Activities Widget -->
            <div class="bg-white rounded-lg border-2 border-gray-300 p-3 hover:shadow-md transition-shadow w-[100px] h-[100px] flex flex-col justify-between">
                <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-gray-800">Activities</h3>
                    <i class="fa fa-clock text-xl text-[#e74c3c]"></i>
                </div>
                <div class="text-2xl font-bold text-gray-900 w-full text-center">{{ stats.activities.total }}</div>
                <div class="text-sm text-gray-600">
                    <span class="text-xs text-gray-500">(Total: {{ stats.activities.total_all_time }})</span>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
