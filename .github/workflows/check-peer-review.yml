name: Check Peer Review

on:
  pull_request:
	types: [opened, reopened, synchronize]

jobs:
  check-peer-review:
	runs-on: ubuntu-latest
	steps:
	  - name: Checkout code
		uses: actions/checkout@v3

	  - name: Ensure PR has peer review
		run: |
		  if [ "$(gh pr view ${{ github.event.pull_request.number }} --json reviews --jq '.reviews | length')" -lt 1 ]; then
			echo "Error: Pull request must have at least one peer review."
			exit 1
		  fi
